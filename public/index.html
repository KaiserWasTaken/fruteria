<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frutería "La Frescura"</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ESTILOS ESPECÍFICOS PARA EL NUEVO DASHBOARD */
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 25px; }
        .kpi-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); display: flex; align-items: center; justify-content: space-between; border-left: 5px solid transparent; transition: transform 0.2s; }
        .kpi-card:hover { transform: translateY(-3px); }
        .kpi-info h3 { margin: 0; font-size: 0.9rem; color: #7f8c8d; text-transform: uppercase; letter-spacing: 1px; }
        .kpi-info .number { font-size: 1.8rem; font-weight: 700; color: #2c3e50; margin-top: 5px; }
        .kpi-icon { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        
        /* Colores KPI */
        .kpi-green { border-left-color: #2ecc71; } .kpi-green .kpi-icon { background: #eafaf1; color: #2ecc71; }
        .kpi-red { border-left-color: #e74c3c; } .kpi-red .kpi-icon { background: #fdedec; color: #e74c3c; }
        .kpi-blue { border-left-color: #3498db; } .kpi-blue .kpi-icon { background: #ebf5fb; color: #3498db; }
        .kpi-orange { border-left-color: #f39c12; } .kpi-orange .kpi-icon { background: #fef5e7; color: #f39c12; }

        /* Paneles inferiores */
        .dashboard-panels { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; }
        .panel { background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); overflow: hidden; }
        .panel-header { background: #f8f9fa; padding: 15px 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .panel-header h3 { margin: 0; font-size: 1rem; color: #2c3e50; }
        .panel-body { padding: 0; }
        
        /* Tablas Dashboard */
        .dash-table { width: 100%; border-collapse: collapse; }
        .dash-table th, .dash-table td { padding: 12px 20px; text-align: left; border-bottom: 1px solid #f1f1f1; font-size: 0.9rem; }
        .dash-table th { background: white; color: #7f8c8d; font-weight: 600; }
        .dash-table tr:last-child td { border-bottom: none; }
        .stock-warning { color: #e74c3c; font-weight: bold; background: #fdedec; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; }
        .price-tag { font-family: monospace; font-weight: bold; color: #27ae60; }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo"><i class="fas fa-apple-alt"></i><h1>Frutería "La Frescura"</h1></div>
            <div class="user-info"><span><i class="fas fa-user"></i> Administrador</span></div>
        </div>
    </header>

    <nav class="nav">
        <div class="container">
            <ul class="nav-menu">
                <li><a href="#dashboard" class="nav-link active" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#productos" class="nav-link" data-section="productos"><i class="fas fa-apple-alt"></i> Productos</a></li>
                <li><a href="#clientes" class="nav-link" data-section="clientes"><i class="fas fa-users"></i> Clientes</a></li>
                <li><a href="#empleados" class="nav-link" data-section="empleados"><i class="fas fa-user-tie"></i> Empleados</a></li>
                <li><a href="#proveedores" class="nav-link" data-section="proveedores"><i class="fas fa-truck"></i> Proveedores</a></li>
                <li><a href="#ventas" class="nav-link" data-section="ventas"><i class="fas fa-shopping-cart"></i> Ventas</a></li>
                <li><a href="#compras" class="nav-link" data-section="compras"><i class="fas fa-box"></i> Compras</a></li>
            </ul>
        </div>
    </nav>

    <main class="main">
        <div class="container">
            <section id="dashboard" class="section active">
                <div style="margin-bottom: 20px;">
                    <h2><i class="fas fa-tachometer-alt"></i> Resumen del Negocio</h2>
                </div>

                <div class="kpi-grid">
                    <div class="kpi-card kpi-green">
                        <div class="kpi-info"><h3>Ventas del Mes</h3><div class="number" id="dash-ventas">$0.00</div></div>
                        <div class="kpi-icon"><i class="fas fa-cash-register"></i></div>
                    </div>
                    <div class="kpi-card kpi-red">
                        <div class="kpi-info"><h3>Compras del Mes</h3><div class="number" id="dash-compras">$0.00</div></div>
                        <div class="kpi-icon"><i class="fas fa-shopping-basket"></i></div>
                    </div>
                    <div class="kpi-card kpi-blue">
                        <div class="kpi-info"><h3>Ganancia Neta</h3><div class="number" id="dash-ganancia">$0.00</div></div>
                        <div class="kpi-icon"><i class="fas fa-wallet"></i></div>
                    </div>
                </div>

                <div class="kpi-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                    <div class="kpi-card kpi-orange"><div class="kpi-info"><h3>Productos</h3><div class="number" id="cnt-productos">-</div></div><div class="kpi-icon"><i class="fas fa-apple-alt"></i></div></div>
                    <div class="kpi-card kpi-blue"><div class="kpi-info"><h3>Clientes</h3><div class="number" id="cnt-clientes">-</div></div><div class="kpi-icon"><i class="fas fa-users"></i></div></div>
                    <div class="kpi-card kpi-green"><div class="kpi-info"><h3>Ventas Totales</h3><div class="number" id="cnt-ventas">-</div></div><div class="kpi-icon"><i class="fas fa-receipt"></i></div></div>
                    <div class="kpi-card kpi-red"><div class="kpi-info"><h3>Proveedores</h3><div class="number" id="cnt-proveedores">-</div></div><div class="kpi-icon"><i class="fas fa-truck"></i></div></div>
                </div>

                <div class="dashboard-panels">
                    <div class="panel">
                        <div class="panel-header">
                            <h3><i class="fas fa-exclamation-triangle" style="color:#e74c3c"></i> Alerta de Stock Bajo</h3>
                        </div>
                        <div class="panel-body">
                            <table class="dash-table">
                                <thead><tr><th>Producto</th><th>Unidad</th><th>Stock</th></tr></thead>
                                <tbody id="table-stock-bajo"><tr><td colspan="3">Cargando...</td></tr></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="panel">
                        <div class="panel-header">
                            <h3><i class="fas fa-clock" style="color:#3498db"></i> Últimas Ventas</h3>
                        </div>
                        <div class="panel-body">
                            <table class="dash-table">
                                <thead><tr><th>Folio</th><th>Fecha</th><th>Total</th></tr></thead>
                                <tbody id="table-recent-sales"><tr><td colspan="3">Cargando...</td></tr></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="productos" class="section">
                <h2><i class="fas fa-apple-alt"></i> Productos</h2>
                <div class="section-actions"><button class="btn btn-primary" onclick="showAddProductModal()"><i class="fas fa-plus"></i> Nuevo</button><div class="search-box"><input type="text" id="search-productos" placeholder="Buscar..."><i class="fas fa-search"></i></div></div>
                <div class="table-container"><table class="data-table"><thead><tr><th>Código</th><th>Descripción</th><th>Cat.</th><th>Unidad</th><th>Exist.</th><th>$ Compra</th><th>$ Venta</th><th>Acciones</th></tr></thead><tbody id="productos-table"></tbody></table></div>
            </section>
            
            <section id="clientes" class="section">
                <h2><i class="fas fa-users"></i> Clientes</h2>
                <div class="section-actions"><button class="btn btn-primary" onclick="showAddClientModal()"><i class="fas fa-plus"></i> Nuevo Cliente</button></div>
                <div class="table-container"><table class="data-table"><thead><tr><th>ID</th><th>Nombre</th><th>Teléfono</th><th>RFC</th><th>Domicilio</th><th>Acciones</th></tr></thead><tbody id="clientes-table"></tbody></table></div>
            </section>

            <section id="empleados" class="section">
                <h2><i class="fas fa-user-tie"></i> Empleados</h2>
                <div class="table-container"><div class="section-actions"><button class="btn btn-primary" onclick="showAddEmpleadoModal()"><i class="fas fa-plus"></i> Nuevo Empleado</button></div><table class="data-table"><thead><tr><th>ID</th><th>Nombre</th><th>Turno</th><th>Salario</th><th>Acciones</th></tr></thead><tbody id="empleados-table"></tbody></table></div>
            </section>

            <section id="proveedores" class="section">
                <h2><i class="fas fa-truck"></i> Proveedores</h2>
                <div class="section-actions"><button class="btn btn-primary" onclick="showAddProveedorModal()"><i class="fas fa-plus"></i> Nuevo Proveedor</button></div>
                <div class="table-container"><table class="data-table"><thead><tr><th>ID</th><th>Nombre</th><th>Contacto</th><th>Teléfono</th><th>Dirección</th><th>Acciones</th></tr></thead><tbody id="proveedores-table"></tbody></table></div>
            </section>

            <section id="ventas" class="section">
                <h2><i class="fas fa-shopping-cart"></i> Ventas</h2>
                <div class="section-actions"><button class="btn btn-primary" onclick="showAddSaleModal()"><i class="fas fa-plus"></i> Nueva Venta</button></div>
                <div class="table-container"><table class="data-table"><thead><tr><th>Folio</th><th>Fecha</th><th>Cliente</th><th>Empleado</th><th>Total</th><th>Acciones</th></tr></thead><tbody id="ventas-table"></tbody></table></div>
            </section>

            <section id="compras" class="section">
                <h2><i class="fas fa-box"></i> Compras</h2>
                <div class="section-actions"><button class="btn btn-primary" onclick="showAddCompraModal()"><i class="fas fa-plus"></i> Nueva Compra</button></div>
                <div class="table-container"><table class="data-table"><thead><tr><th>Folio</th><th>Lote</th><th>Fecha</th><th>Proveedor</th><th>Empleado</th><th>Total</th></tr></thead><tbody id="compras-table"></tbody></table></div>
            </section>
        </div>
    </main>

    <div id="modal-overlay" class="modal-overlay">
        <div id="modal-producto" class="modal" style="display: none;"></div>
        <div id="modal-cliente" class="modal" style="display: none;"><div class="modal-header"><h3>Datos Cliente</h3><button class="modal-close" onclick="closeModal()">x</button></div><div class="modal-body"><form id="form-cliente"><input type="hidden" id="cli-id"><div class="form-group"><label>Nombre</label><input type="text" id="cli-nombre" required></div><div class="form-group"><label>Teléfono</label><input type="text" id="cli-tel"></div><div class="form-group"><label>Correo</label><input type="email" id="cli-correo"></div><div class="form-group"><label>RFC</label><input type="text" id="cli-rfc"></div><div class="form-group"><label>Domicilio</label><input type="text" id="cli-dom"></div><div class="form-actions"><button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button><button type="submit" class="btn btn-primary">Guardar</button></div></form></div></div>
        <div id="modal-empleado" class="modal" style="display: none;"><div class="modal-header"><h3>Datos Empleado</h3><button class="modal-close" onclick="closeModal()">x</button></div><div class="modal-body"><form id="form-empleado"><input type="hidden" id="emp-id"><div class="form-group"><label>Nombre</label><input type="text" id="emp-nombre" required></div><div class="form-group"><label>Puesto</label><input type="text" id="emp-puesto"></div><div class="form-group"><label>Turno</label><select id="emp-turno"><option>Matutino</option><option>Vespertino</option></select></div><div class="form-group"><label>Teléfono</label><input type="text" id="emp-telefono"></div><div class="form-group"><label>Salario</label><input type="number" id="emp-salario" step="0.01"></div><div class="form-actions"><button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button><button type="submit" class="btn btn-primary">Guardar</button></div></form></div></div>
        <div id="modal-proveedor" class="modal" style="display: none;"><div class="modal-header"><h3>Datos Proveedor</h3><button class="modal-close" onclick="closeModal()">x</button></div><div class="modal-body"><form id="form-proveedor"><input type="hidden" id="prov-id"><div class="form-group"><label>Empresa</label><input type="text" id="prov-nombre" required></div><div class="form-group"><label>Contacto</label><input type="text" id="prov-contacto"></div><div class="form-group"><label>Teléfono</label><input type="text" id="prov-telefono"></div><div class="form-group"><label>Dirección</label><textarea id="prov-direccion" rows="2"></textarea></div><div class="form-actions"><button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button><button type="submit" class="btn btn-primary">Guardar</button></div></form></div></div>
        <div id="modal-venta" class="modal" style="display: none; max-width: 700px;"><div class="modal-header"><h3>Registrar Venta</h3><button class="modal-close" onclick="closeModal()">x</button></div><div class="modal-body"><form id="form-venta"><div style="display: flex; gap: 10px;"><div class="form-group" style="flex:1"><label>Cliente</label><select id="venta-cliente" required></select></div><div class="form-group" style="flex:1"><label>Empleado</label><select id="venta-empleado" required></select></div></div><hr><div style="display: flex; gap: 10px; align-items: flex-end;"><div class="form-group" style="flex:2"><label>Producto</label><select id="venta-producto"></select></div><div class="form-group" style="flex:1"><label>Cantidad</label><input type="number" id="venta-cantidad" value="1" min="1"></div><div class="form-group"><button type="button" class="btn btn-info" onclick="addToCart()"><i class="fas fa-plus"></i></button></div></div><div style="max-height: 200px; overflow-y: auto; margin-top: 10px; border: 1px solid #eee;"><table class="data-table" style="font-size: 0.9em;"><thead><tr><th>Producto</th><th>Cant.</th><th>Subtotal</th><th>X</th></tr></thead><tbody id="venta-carrito"></tbody></table></div><div style="text-align: right; margin-top: 10px;"><h3>Total: $<span id="venta-total">0.00</span></h3></div><div class="form-actions"><button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button><button type="submit" class="btn btn-primary">Finalizar Venta</button></div></form></div></div>
        <div id="modal-compra" class="modal" style="display: none; max-width: 700px;"><div class="modal-header"><h3>Registrar Compra</h3><button class="modal-close" onclick="closeModal()">x</button></div><div class="modal-body"><form id="form-compra"><div style="display: flex; gap: 10px;"><div class="form-group" style="flex:1"><label>Proveedor</label><select id="compra-proveedor" required></select></div><div class="form-group" style="flex:1"><label>Empleado</label><select id="compra-empleado" required></select></div><div class="form-group" style="flex:1"><label>Lote</label><input type="text" id="compra-lote" placeholder="Lote #"></div></div><hr><div style="display: flex; gap: 10px; align-items: flex-end;"><div class="form-group" style="flex:2"><label>Producto</label><select id="compra-producto"></select></div><div class="form-group" style="flex:1"><label>Cantidad</label><input type="number" id="compra-cantidad" value="1" min="1"></div><div class="form-group"><button type="button" class="btn btn-info" onclick="addToPurchaseCart()"><i class="fas fa-plus"></i></button></div></div><div style="max-height: 200px; overflow-y: auto; margin-top: 10px; border: 1px solid #eee;"><table class="data-table" style="font-size: 0.9em;"><thead><tr><th>Producto</th><th>Cant.</th><th>Costo Total</th><th>X</th></tr></thead><tbody id="compra-carrito"></tbody></table></div><div style="text-align: right; margin-top: 10px;"><h3>Total: $<span id="compra-total">0.00</span></h3></div><div class="form-actions"><button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button><button type="submit" class="btn btn-primary">Finalizar Compra</button></div></form></div></div>
    </div>

    <div id="toast-container" class="toast-container"></div>
    <script src="script.js"></script>
</body>
</html>